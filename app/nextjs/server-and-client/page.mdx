# Server-Client Components

Next.js에서는 기본적으로 페이지나 레이아웃이 모두 “서버 컴포넌트(Server Component)”로 만들어져요. 이건 쉽게 말하면, 우리가 웹사이트를 열었을 때 화면의 일부를 서버가 미리 만들어서 보내주는 방식이에요. 예를 들어 “카페 목록”이나 “뉴스 기사 리스트”처럼 서버가 이미 알고 있는 정보를 보여줄 때는, 서버가 미리 완성된 HTML을 만들어서 사용자에게 보내주면 훨씬 빠르고 효율적이에요. 이렇게 하면 브라우저는 복잡한 계산 없이 바로 화면을 보여줄 수 있죠.

하지만 웹사이트에는 사용자가 직접 클릭하거나, 입력하거나, 움직여야 하는 부분도 있잖아요. 이런 건 서버에서 처리할 수 없어요. 그래서 이런 상호작용이 필요한 부분은 클라이언트 컴포넌트(Client Component) 로 만들어야 해요. 클라이언트 컴포넌트는 브라우저 안에서 작동하는 코드로, 사용자의 행동에 따라 바로 반응할 수 있게 도와줘요. 예를 들어 “좋아요 ❤️ 버튼”을 눌렀을 때 색이 변한다든지, “댓글 입력창”에 글을 쓸 수 있는 기능 같은 것들이 모두 클라이언트 컴포넌트에 해당돼요.

Next.js는 이 두 가지 방식을 섞어서 사용할 수 있어요. 즉, 화면의 대부분은 서버 컴포넌트로 만들어서 빠르고 안정적으로 보여주고, 사용자와 직접 상호작용이 필요한 부분만 클라이언트 컴포넌트로 덧붙이는 식이에요. 이렇게 하면 페이지는 더 빨리 로드되고, 동시에 필요한 인터랙션도 자유롭게 구현할 수 있죠. 쉽게 말하면 서버는 미리 만들어서 보내주는 “배경”이고, 브라우저는 거기에 움직임과 반응을 더하는 “손” 역할을 하는 거예요.

## 언제 사용할까요?
서버 컴포넌트와 클라이언트 컴포넌트를 언제 써야 하는지는 “어떤 일을 어디에서 처리하느냐”에 따라 달라져요. 브라우저(클라이언트)와 서버는 서로 할 수 있는 일이 다르기 때문이에요.

예를 들어 사용자가 버튼을 클릭하거나 입력창에 글을 쓰는 등, 화면 위에서 바로 일어나는 일은 브라우저에서 처리해야 해요. 그래서 이런 경우에는 **클라이언트 컴포넌트(Client Component)** 를 사용해야 합니다.  
클라이언트 컴포넌트는 `onClick`, `onChange` 같은 이벤트나 `useEffect`처럼 컴포넌트의 생명주기와 관련된 로직을 쓸 때, 그리고 `localStorage`, `window`, `navigator.geolocation` 같은 브라우저 전용 기능을 다룰 때 필요해요. 즉, 사용자의 행동에 반응하거나 브라우저 안에서만 가능한 일을 해야 할 때 클라이언트 컴포넌트를 사용하는 거예요.

반대로, 서버 쪽에서는 데이터베이스나 외부 API에서 정보를 가져오거나, API 키나 비밀 토큰 같은 민감한 정보를 안전하게 다루는 일을 담당해요. 또, 클라이언트에 불필요하게 많은 자바스크립트를 보내지 않아서 페이지 로딩 속도를 높이고, 화면의 첫 번째 내용이 빠르게 보이도록 도와주는 역할도 합니다. 이런 경우에는 **서버 컴포넌트(Server Component)** 가 적합해요.

예를 들어 `<Page>`라는 컴포넌트가 서버에서 게시글 데이터를 가져오고, 그 정보를 `<LikeButton>`이라는 클라이언트 컴포넌트로 넘겨준다고 해볼게요. `<Page>`는 데이터를 처리하는 서버 쪽 일을 담당하고, `<LikeButton>`은 사용자가 “좋아요 ❤️”를 누를 때 반응하는 인터랙티브한 부분을 담당하는 거죠.  

즉, 서버 컴포넌트는 “정보를 준비하는 역할”, 클라이언트 컴포넌트는 “사용자와 직접 상호작용하는 역할” 을 하는 거예요.

```ts filename="app/[id]/page.tsx" showLineNumbers {1,12} copy
import LikeButton from '@/app/ui/like-button'
import { getPost } from '@/lib/data'

export default async function Page({
    params,
}: {
    params: Promise<{ id: string }>
}) {
    const { id } = await params
    const post = await getPost(id)

    return (
        <div>
        <main>
            <h1>{post.title}</h1>
            {/* ... */}
            <LikeButton likes={post.likes} />
        </main>
        </div>
    )
}
```
```ts filename="app/[id]/page.tsx" showLineNumbers {1} copy
'use client'
 
import { useState } from 'react'
 
export default function LikeButton({ likes }: { likes: number }) {
  // ...
}
```
